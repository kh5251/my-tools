<!DOCTYPE html>
<html lang="ko">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9J3H9RR9ZD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9J3H9RR9ZD');
    </script>

    <script>
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>배란일 계산기 - 이지툴즈</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #E11D48; }
        .card { background: #FFF1F2; border-left: 5px solid #E11D48; padding: 15px; margin-bottom: 10px; border-radius: 4px; text-align: left; }
        .card-title { font-size: 0.9rem; color: #9F1239; font-weight: bold; }
        .card-date { font-size: 1.3rem; font-weight: 800; color: #333; margin-top: 5px; }
    </style>
    <link rel="manifest" href="../manifest.json">

    <link rel="icon" type="image/png" sizes="32x32" href="../images/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../images/icon-192.png">

</head>
<body class="tool-page">
    <div class="container">
    <button class="tool-theme-btn" onclick="toggleThemeTool()">
        <i class="fas fa-moon"></i>
    </button>

        <h1><i class="fas fa-venus"></i> 배란일 계산기</h1>
        
        <div class="input-group">
            <label>마지막 생리 시작일</label>
            <input type="date" id="startDate">
        </div>
        <div class="input-group">
            <label>생리 주기 (일)</label>
            <input type="number" id="cycle" value="28">
        </div>

        <button class="calc-btn" onclick="calcPeriod()">확인하기</button>

        <div class="result-box" id="result" style="display:none; background:white; padding:0; border:none;">
            <div class="card">
                <div class="card-title">❤️ 다음 생리 예정일</div>
                <div class="card-date" id="nextPeriod">-</div>
            </div>
            <div class="card" style="border-color: #FBbf24; background: #FFFBEB;">
                <div class="card-title" style="color:#B45309;">✨ 배란 예정일</div>
                <div class="card-date" id="ovulationDate">-</div>
            </div>
            <div class="card" style="border-color: #34D399; background: #ECFDF5;">
                <div class="card-title" style="color:#047857;">👶 가임기 (사랑일)</div>
                <div class="card-date" id="fertileWindow">-</div>
            </div>
        </div>
        
        <div class="info-section">
            <h2>내 몸을 아는 첫걸음, 생리주기와 배란일</h2>
            <p>여성의 몸은 한 달을 주기로 호르몬의 파도를 탑니다. 생리주기를 정확히 아는 것은 단순히 생리대를 챙기기 위함이 아닙니다. 임신을 준비하는 부부에게는 소중한 아이를 만날 기회를, 피임을 원하는 커플에게는 조심해야 할 시기를, 그리고 건강을 관리하는 여성에게는 내 몸의 이상 신호를 감지하는 가장 기초적인 데이터가 됩니다. 이 계산기는 전 세계적으로 가장 널리 쓰이는 <strong>오기노식(Ogino) 계산법</strong>을 기반으로 여러분의 소중한 날짜를 예측해 드립니다.</p>
        
            <h3>1. 배란일은 어떻게 계산하나요? (14일의 법칙)</h3>
            <p>많은 분이 "생리 시작하고 14일 뒤"가 배란일이라고 오해합니다. 하지만 정확한 의학적 계산법은 <strong>"다음 생리 예정일로부터 거꾸로 14일 전"</strong>입니다.</p>
            <ul>
                <li>생리 주기가 28일인 경우: 생리 시작 후 14일째가 배란일</li>
                <li>생리 주기가 35일인 경우: 생리 시작 후 21일째가 배란일 (35 - 14 = 21)</li>
                <li>생리 주기가 불규칙하다면: 최근 3~6개월의 평균 주기를 입력하는 것이 좋습니다.</li>
            </ul>
            <p>난포기(생리 시작~배란 전)는 스트레스나 컨디션에 따라 기간이 고무줄처럼 늘어나거나 줄어들 수 있지만, 황체기(배란 후~다음 생리)는 약 14일로 거의 일정하기 때문입니다.</p>
        
            <h3>2. 가임기(Love Day)가 1주일이나 되는 이유</h3>
            <p>배란(난자가 난소 밖으로 나오는 것)은 딱 하루, 길어야 24시간 동안만 일어납니다. 그런데 왜 임신 가능 기간은 일주일이나 될까요? 바로 <strong>정자의 생존 기간</strong> 때문입니다.</p>
            <ul>
                <li><strong>난자 생존 기간:</strong> 배란 후 12~24시간 (하루)</li>
                <li><strong>정자 생존 기간:</strong> 여성의 몸속에서 3~5일 (최대 7일)</li>
            </ul>
            <p>즉, 배란일 5일 전에 관계를 가졌더라도, 건강하게 살아남은 정자가 배란된 난자와 만나 수정될 수 있습니다. 따라서 배란일 전 5일부터 배란일 후 2일까지를 '가임기'로 보고 주의해야 합니다.</p>
        
            <div class="highlight-box">
                <strong>⚠️ 자연피임법(주기법)의 주의사항</strong><br>
                이 계산기는 규칙적인 생리 주기를 가진 여성을 기준으로 합니다. 하지만 여성의 몸은 기계가 아닙니다. 스트레스, 다이어트, 수면 부족, 약물 복용 등 사소한 변화에도 배란일이 며칠씩 앞당겨지거나 늦춰질 수 있습니다. 피임 실패율이 20%가 넘는 방법이므로, <strong>원치 않는 임신을 막기 위해서는 반드시 콘돔 등 확실한 피임 도구를 병행</strong>해야 합니다.
            </div>
        
            <h3>3. 배란 점액과 기초체온법</h3>
            <p>날짜 계산만으로 불안하다면 몸의 신호를 함께 체크해 보세요. 배란일이 다가오면 다음과 같은 증상이 나타납니다.</p>
            <ul>
                <li><strong>배란 점액:</strong> 맑고 투명하며 쭉 늘어나는 콧물 같은 냉이 나옵니다. 정자가 자궁으로 잘 이동하도록 돕는 역할을 합니다.</li>
                <li><strong>기초체온 상승:</strong> 아침에 눈 뜨자마자 잰 체온이 평소보다 0.3~0.5도 정도 뚝 떨어졌다가, 배란 직후 고온기로 올라가 유지됩니다.</li>
                <li><strong>배란통:</strong> 아랫배가 콕콕 쑤시거나 묵직한 통증을 느끼는 경우도 있습니다.</li>
            </ul>
        </div>
        <a href="../index.html" class="back-btn">← 메인으로 돌아가기</a>
    </div>

    <script>
        function calcPeriod() {
            const start = document.getElementById('startDate').valueAsDate;
            const cycle = parseInt(document.getElementById('cycle').value);
            if(!start || !cycle) return;

            const next = new Date(start); next.setDate(start.getDate() + cycle);
            const ovul = new Date(next); ovul.setDate(next.getDate() - 14);
            const fStart = new Date(ovul); fStart.setDate(ovul.getDate() - 5);
            const fEnd = new Date(ovul); fEnd.setDate(ovul.getDate() + 2);

            const fmt = d => `${d.getMonth()+1}월 ${d.getDate()}일`;
            document.getElementById('result').style.display = 'block';
            document.getElementById('nextPeriod').innerText = fmt(next);
            document.getElementById('ovulationDate').innerText = fmt(ovul);
            document.getElementById('fertileWindow').innerText = `${fmt(fStart)} ~ ${fmt(fEnd)}`;
        }
    </script>

    <script>
        // 다크모드 토글 기능
        function toggleThemeTool() {
            const current = document.documentElement.getAttribute('data-theme');
            if (current === 'dark') {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            }
        }
    </script>

    <script>
        // 기존 alert() 함수를 가로채서 토스트로 보여주는 마법의 코드
        window.alert = function(message) {
            showToast(message);
        };

        function showToast(message) {
            // 컨테이너가 없으면 생성
            let container = document.getElementById('toast-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'toast-container';
                document.body.appendChild(container);
            }

            // 메시지 박스 생성
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            // 아이콘과 메시지 결합
            toast.innerHTML = `<i class="fas fa-check-circle"></i> <span>${message}</span>`;

            container.appendChild(toast);

            // 애니메이션 시작
            requestAnimationFrame(() => {
                setTimeout(() => { toast.classList.add('show'); }, 10);
            });

            // 2.5초 후 제거
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => { 
                    if(container.contains(toast)) container.removeChild(toast);
                }, 300);
            }, 2500);
        }
    </script>
</body>


</html>
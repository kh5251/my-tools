<!DOCTYPE html>
<html lang="ko">
<head>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-9J3H9RR9ZD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-9J3H9RR9ZD');
    </script>

    <script>
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'dark') {
            document.documentElement.setAttribute('data-theme', 'dark');
        }
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¡œë˜ ì‹œë®¬ë ˆì´í„° (ê°€ìƒ ì¶”ì²¨) - ì´ì§€íˆ´ì¦ˆ</title>
    <link rel="stylesheet" href="../css/style.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #F59E0B; }
        
        /* ë¡œë˜ ê³µí†µ ìŠ¤íƒ€ì¼ */
        .ball { 
            display: inline-flex; justify-content: center; align-items: center;
            width: 35px; height: 35px; border-radius: 50%; 
            font-weight: bold; color: white; font-size: 0.9rem; 
            margin: 2px; text-shadow: 0 1px 2px rgba(0,0,0,0.2);
            box-shadow: inset -2px -2px 5px rgba(0,0,0,0.2);
        }
        /* ê³µ ìƒ‰ìƒ */
        .b-1 { background-color: #FBC400; } /* 1-10 */
        .b-11 { background-color: #69C8F2; } /* 11-20 */
        .b-21 { background-color: #FF7272; } /* 21-30 */
        .b-31 { background-color: #AAAAAA; } /* 31-40 */
        .b-41 { background-color: #B0D840; } /* 41-45 */
        
        /* ì„¹ì…˜ë³„ ìŠ¤íƒ€ì¼ */
        .winning-section {
            background: #FFFBEB; border: 2px solid #FCD34D; 
            border-radius: 12px; padding: 20px; margin-bottom: 20px;
            text-align: center;
        }
        .win-balls-wrapper { display: flex; justify-content: center; align-items: center; gap: 5px; flex-wrap: wrap; margin-top: 10px; }
        .plus-sign { font-size: 1.5rem; color: #aaa; margin: 0 10px; }

        /* ê²°ê³¼ ìš”ì•½í‘œ */
        .summary-box {
            display: flex; gap: 10px; margin-bottom: 20px;
        }
        .sum-card {
            flex: 1; background: #fff; border: 1px solid #ddd; 
            border-radius: 8px; padding: 15px; text-align: center;
        }
        .sum-label { font-size: 0.85rem; color: #666; margin-bottom: 5px; }
        .sum-val { font-size: 1.1rem; font-weight: bold; color: #333; }
        .profit-plus { color: #DC2626; } /* ì´ë“ */
        .profit-minus { color: #2563EB; } /* ì†í•´ */

        /* êµ¬ë§¤ ë‚´ì—­ ë¦¬ìŠ¤íŠ¸ */
        .ticket-list { 
            max-height: 500px; overflow-y: auto; 
            border: 1px solid #eee; border-radius: 8px; padding: 10px;
        }
        .ticket-row {
            display: flex; justify-content: space-between; align-items: center;
            padding: 10px; border-bottom: 1px solid #f0f0f0;
        }
        .ticket-row:last-child { border-bottom: none; }
        .rank-badge {
            padding: 4px 8px; border-radius: 4px; font-size: 0.8rem; font-weight: bold;
            color: white; background: #9CA3AF; min-width: 50px; text-align: center;
        }
        .rank-1 { background: #DC2626; } /* 1ë“± */
        .rank-2 { background: #EA580C; }
        .rank-3 { background: #F59E0B; }
        .rank-4 { background: #2563EB; }
        .rank-5 { background: #10B981; }
        .rank-0 { background: #E5E7EB; color: #999; } /* ê½ */

        /* ëª¨ë°”ì¼ ëŒ€ì‘ */
        @media (max-width: 600px) {
            .ball { width: 30px; height: 30px; font-size: 0.8rem; }
            .ticket-row { flex-direction: column; gap: 5px; align-items: flex-start; }
            .ticket-right { width: 100%; display: flex; justify-content: space-between; align-items: center; }
        }
    </style>
    <link rel="manifest" href="../manifest.json">

    <link rel="icon" type="image/png" sizes="32x32" href="../images/icon-192.png">
    <link rel="apple-touch-icon" sizes="180x180" href="../images/icon-192.png">

</head>
<body class="tool-page">
    <div class="container">
    <button class="tool-theme-btn" onclick="toggleThemeTool()">
        <i class="fas fa-moon"></i>
    </button>

        <h1><i class="fas fa-ticket-alt"></i> ë¡œë˜ ì‹œë®¬ë ˆì´í„°</h1>
        
        <div class="input-group" style="display:flex; gap:10px; align-items:flex-end;">
            <div style="flex:1;">
                <label>êµ¬ë§¤ ìˆ˜ëŸ‰ (1~100ì¥)</label>
                <input type="number" id="buyCount" value="5" min="1" max="100" placeholder="ì¥ìˆ˜">
            </div>
            <button class="calc-btn" style="flex:1; margin:0;" onclick="runSimulation()">êµ¬ë§¤ ë° ì¶”ì²¨ ğŸ°</button>
        </div>

        <div id="simulationResult" style="display:none;">
            <div class="winning-section">
                <div style="font-weight:bold; color:#D97706;">ì´ë²ˆ íšŒì°¨ ë‹¹ì²¨ ë²ˆí˜¸</div>
                <div class="win-balls-wrapper" id="winBalls">
                    </div>
            </div>

            <div class="summary-box">
                <div class="sum-card">
                    <div class="sum-label">ì´ êµ¬ë§¤ì•¡</div>
                    <div class="sum-val" id="totalCost">0ì›</div>
                </div>
                <div class="sum-card">
                    <div class="sum-label">ì´ ë‹¹ì²¨ê¸ˆ</div>
                    <div class="sum-val" id="totalPrize">0ì›</div>
                </div>
                <div class="sum-card">
                    <div class="sum-label">ìˆ˜ìµë¥ </div>
                    <div class="sum-val" id="profitRate">0%</div>
                </div>
            </div>

            <h3 style="text-align:left; font-size:1rem; margin-bottom:10px;">ğŸ“œ êµ¬ë§¤ ë‚´ì—­ ìƒì„¸</h3>
            <div class="ticket-list" id="ticketList">
                </div>
        </div>

        <div class="info-section">
            <h2>ë¡œë˜ 10ë§Œ ì›ì–´ì¹˜ ì‚¬ë©´ ì–¼ë§ˆë‚˜ ë‹¹ì²¨ë ê¹Œ?</h2>
            <p>ì´ ì‹œë®¬ë ˆì´í„°ëŠ” ì‹¤ì œ ë¡œë˜ 6/45 ê·œì¹™ì„ ì™„ë²½í•˜ê²Œ ì ìš©í•˜ì—¬ ê²°ê³¼ë¥¼ ì˜ˆì¸¡í•´ ì¤ë‹ˆë‹¤. 1ë“±ë¶€í„° 5ë“±ê¹Œì§€ì˜ ë‹¹ì²¨ ì¡°ê±´ê³¼ í‰ê·  ë‹¹ì²¨ê¸ˆì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

            <h3>1. ë“±ìˆ˜ë³„ ë‹¹ì²¨ ì¡°ê±´ ë° ê¸ˆì•¡ (ê°€ìƒ)</h3>
            <ul>
                <li><strong>1ë“± (6ê°œ ì¼ì¹˜):</strong> ì•½ 20ì–µ ì› (í™•ë¥  1/8,145,060)</li>
                <li><strong>2ë“± (5ê°œ + ë³´ë„ˆìŠ¤):</strong> ì•½ 5,000ë§Œ ì›</li>
                <li><strong>3ë“± (5ê°œ ì¼ì¹˜):</strong> ì•½ 150ë§Œ ì›</li>
                <li><strong>4ë“± (4ê°œ ì¼ì¹˜):</strong> 50,000ì› (ê³ ì •)</li>
                <li><strong>5ë“± (3ê°œ ì¼ì¹˜):</strong> 5,000ì› (ê³ ì •)</li>
            </ul>

            <h3>2. ë¡œë˜ì˜ ëƒ‰ì •í•œ í˜„ì‹¤</h3>
            <p>í†µê³„ì ìœ¼ë¡œ ë¡œë˜ì˜ ê¸°ëŒ€ ìˆ˜ìµë¥ ì€ ì•½ 50%ì…ë‹ˆë‹¤. ì¦‰, 10,000ì›ì„ ì‚¬ë©´ í‰ê· ì ìœ¼ë¡œ 5,000ì›ë§Œ ëŒì•„ì˜¨ë‹¤ëŠ” ëœ»ì…ë‹ˆë‹¤. ì´ ì‹œë®¬ë ˆì´í„°ë¥¼ í†µí•´ 100ì¥ì„ ì‚¬ë„ 5ë“±(5ì²œ ì›) ëª‡ ê°œ ê±´ì§€ê¸° í˜ë“¤ë‹¤ëŠ” 'í™•ë¥ ì˜ ë¬´ì„œì›€'ì„ ì§ì ‘ ì²´í—˜í•´ ë³´ì„¸ìš”. ë³µê¶Œì€ íˆ¬ìê°€ ì•„ë‹ˆë¼ ì†Œì•¡ìœ¼ë¡œ ì¦ê¸°ëŠ” ì˜¤ë½ì´ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
        </div>

        <a href="../index.html" class="back-btn">â† ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°</a>
    </div>

    <script>
        // ê³µ HTML ìƒì„± í—¬í¼ í•¨ìˆ˜
        function makeBall(num) {
            let colorClass = 'b-1';
            if(num > 40) colorClass = 'b-41';
            else if(num > 30) colorClass = 'b-31';
            else if(num > 20) colorClass = 'b-21';
            else if(num > 10) colorClass = 'b-11';
            
            return `<div class="ball ${colorClass}">${num}</div>`;
        }

        // 1~45 ëœë¤ ìˆ«ì 6ê°œ ìƒì„± (ì •ë ¬ë¨)
        function generateSet() {
            const nums = new Set();
            while(nums.size < 6) {
                nums.add(Math.floor(Math.random() * 45) + 1);
            }
            return Array.from(nums).sort((a,b) => a-b);
        }

        function runSimulation() {
            const count = parseInt(document.getElementById('buyCount').value);
            if(count < 1 || count > 100) { alert("1ì¥ì—ì„œ 100ì¥ ì‚¬ì´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”."); return; }

            // 1. ë‹¹ì²¨ ë²ˆí˜¸ ìƒì„± (6ê°œ + ë³´ë„ˆìŠ¤ 1ê°œ)
            const winSet = new Set();
            while(winSet.size < 7) {
                winSet.add(Math.floor(Math.random() * 45) + 1);
            }
            const winArr = Array.from(winSet);
            const bonus = winArr.pop(); // ë§ˆì§€ë§‰ ìˆ«ìë¥¼ ë³´ë„ˆìŠ¤ë¡œ ì”€
            const mains = winArr.sort((a,b) => a-b); // ë‚˜ë¨¸ì§€ 6ê°œ ì •ë ¬

            // ë‹¹ì²¨ ë²ˆí˜¸ í™”ë©´ í‘œì‹œ
            const winDiv = document.getElementById('winBalls');
            winDiv.innerHTML = mains.map(n => makeBall(n)).join('') + 
                               `<span class="plus-sign">+</span>` + 
                               makeBall(bonus) + `<div style="font-size:0.8rem; color:#666; margin-top:5px; width:100%;">ë³´ë„ˆìŠ¤</div>`;

            // 2. êµ¬ë§¤ ë° ê²°ê³¼ í™•ì¸
            const listDiv = document.getElementById('ticketList');
            listDiv.innerHTML = "";
            
            let totalPrize = 0;
            let purchaseCost = count * 1000;

            for(let i=0; i<count; i++) {
                const myNums = generateSet();
                
                // ì¼ì¹˜ ê°œìˆ˜ í™•ì¸
                let matchCnt = 0;
                myNums.forEach(n => { if(mains.includes(n)) matchCnt++; });
                
                let isBonus = myNums.includes(bonus);
                let rank = 0; // 0ì€ ê½
                let prize = 0;

                if(matchCnt === 6) { rank = 1; prize = 2000000000; }
                else if(matchCnt === 5 && isBonus) { rank = 2; prize = 50000000; }
                else if(matchCnt === 5) { rank = 3; prize = 1500000; }
                else if(matchCnt === 4) { rank = 4; prize = 50000; }
                else if(matchCnt === 3) { rank = 5; prize = 5000; }

                totalPrize += prize;

                // ë¦¬ìŠ¤íŠ¸ì— ì¶”ê°€
                const row = document.createElement('div');
                row.className = 'ticket-row';
                
                // ë²ˆí˜¸ ë Œë”ë§ (ë§ì¶˜ ë²ˆí˜¸ í…Œë‘ë¦¬ ê°•ì¡° íš¨ê³¼ ë“± ì¤„ ìˆ˜ ìˆì§€ë§Œ ì—¬ê¸°ì„  ë‹¨ìˆœ í‘œì‹œ)
                let ballHtml = myNums.map(n => {
                    // ë‹¹ì²¨ë²ˆí˜¸ë‚˜ ë³´ë„ˆìŠ¤ë²ˆí˜¸ì™€ ì¼ì¹˜í•˜ë©´ ê·¸ëŒ€ë¡œ, ì•„ë‹ˆë©´ íˆ¬ëª…ë„ ì¡°ì ˆ
                    let isHit = mains.includes(n) || (rank === 2 && n === bonus);
                    let style = isHit ? "" : "opacity:0.3; transform:scale(0.9);";
                    // ê½ì´ë©´ ê·¸ëƒ¥ ë‹¤ íë¦¬ê²Œ í•˜ë˜, ë²ˆí˜¸ëŠ” ë³´ì´ê²Œ
                    if(rank === 0) style = "opacity:0.6; background-color:#ccc; box-shadow:none;"; 
                    
                    // ê³µ ìƒì„± (ì¼ì¹˜ ì—¬ë¶€ ìƒê´€ì—†ì´ ìƒ‰ìƒì€ ìœ ì§€í•˜ë˜ ìŠ¤íƒ€ì¼ ì ìš©)
                    // ë³µì¡ë„ë¥¼ ì¤„ì´ê¸° ìœ„í•´ ê¸°ë³¸ ê³µ ìƒì„± í›„ style ì¶”ê°€
                    return `<div class="ball" style="${style} background-color:${getBallColor(n)}">${n}</div>`;
                }).join('');

                let rankBadge = rank > 0 ? `<span class="rank-badge rank-${rank}">${rank}ë“±</span>` : `<span class="rank-badge rank-0">ê½</span>`;
                let prizeText = rank > 0 ? `<span style="font-size:0.9rem; font-weight:bold; color:#333;">${prize.toLocaleString()}ì›</span>` : "";

                row.innerHTML = `
                    <div style="display:flex;">${ballHtml}</div>
                    <div class="ticket-right" style="display:flex; gap:10px; align-items:center;">
                        ${prizeText} ${rankBadge}
                    </div>
                `;
                listDiv.appendChild(row);
            }

            // 3. ìµœì¢… ì •ì‚°
            document.getElementById('totalCost').innerText = purchaseCost.toLocaleString() + "ì›";
            document.getElementById('totalPrize').innerText = totalPrize.toLocaleString() + "ì›";
            
            const profit = totalPrize - purchaseCost;
            const rate = ((profit / purchaseCost) * 100).toFixed(1);
            
            const rateObj = document.getElementById('profitRate');
            rateObj.innerText = (profit > 0 ? "+" : "") + rate + "%";
            rateObj.className = "sum-val " + (profit >= 0 ? "profit-plus" : "profit-minus");

            document.getElementById('simulationResult').style.display = 'block';
        }

        // ê³µ ìƒ‰ìƒ ì½”ë“œ ë°˜í™˜ í•¨ìˆ˜ (ë‚´ë¶€ìš©)
        function getBallColor(n) {
            if(n<=10) return "#FBC400";
            if(n<=20) return "#69C8F2";
            if(n<=30) return "#FF7272";
            if(n<=40) return "#AAAAAA";
            return "#B0D840";
        }
    </script>

    <script>
        // ë‹¤í¬ëª¨ë“œ í† ê¸€ ê¸°ëŠ¥
        function toggleThemeTool() {
            const current = document.documentElement.getAttribute('data-theme');
            if (current === 'dark') {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
            }
        }
    </script>

    <script>
        // ê¸°ì¡´ alert() í•¨ìˆ˜ë¥¼ ê°€ë¡œì±„ì„œ í† ìŠ¤íŠ¸ë¡œ ë³´ì—¬ì£¼ëŠ” ë§ˆë²•ì˜ ì½”ë“œ
        window.alert = function(message) {
            showToast(message);
        };

        function showToast(message) {
            // ì»¨í…Œì´ë„ˆê°€ ì—†ìœ¼ë©´ ìƒì„±
            let container = document.getElementById('toast-container');
            if (!container) {
                container = document.createElement('div');
                container.id = 'toast-container';
                document.body.appendChild(container);
            }

            // ë©”ì‹œì§€ ë°•ìŠ¤ ìƒì„±
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            // ì•„ì´ì½˜ê³¼ ë©”ì‹œì§€ ê²°í•©
            toast.innerHTML = `<i class="fas fa-check-circle"></i> <span>${message}</span>`;

            container.appendChild(toast);

            // ì• ë‹ˆë©”ì´ì…˜ ì‹œì‘
            requestAnimationFrame(() => {
                setTimeout(() => { toast.classList.add('show'); }, 10);
            });

            // 2.5ì´ˆ í›„ ì œê±°
            setTimeout(() => {
                toast.classList.remove('show');
                setTimeout(() => { 
                    if(container.contains(toast)) container.removeChild(toast);
                }, 300);
            }, 2500);
        }
    </script>
</body>


</html>